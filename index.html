<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Cosmic Research Lab</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
html,body {
  margin:0;
  padding:0;
  overflow:hidden;
  background:black;
  font-family:Arial;
}
#ui {
  position:fixed;
  top:20px;
  left:20px;
  z-index:10;
}
button {
  background:rgba(0,150,255,0.2);
  color:white;
  border:1px solid #0ff;
  padding:10px 14px;
  cursor:pointer;
}
</style>
</head>
<body>

<div id="ui">
  <button onclick="spawnAtom()">Spawn Atom</button>
  <button onclick="spawnMatter()">Spawn Matter</button>
</div>

<script type="module">
import * as THREE from "https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.module.js";

/* SCENE */
const scene = new THREE.Scene();
scene.fog = new THREE.Fog(0x000000, 15, 100);

/* CAMERA */
const camera = new THREE.PerspectiveCamera(65, innerWidth/innerHeight, 0.1, 500);
camera.position.z = 50;

/* RENDERER */
const renderer = new THREE.WebGLRenderer({ antialias:true });
renderer.setSize(innerWidth, innerHeight);
renderer.setPixelRatio(devicePixelRatio);
document.body.appendChild(renderer.domElement);

/* LIGHT */
scene.add(new THREE.AmbientLight(0x4444ff, 0.6));
const sun = new THREE.PointLight(0x88ccff, 3, 200);
sun.position.set(0,0,30);
scene.add(sun);

/* STARS */
const starGeo = new THREE.BufferGeometry();
const starCount = 80000;
const pos = new Float32Array(starCount*3);
for(let i=0;i<starCount*3;i++){
  pos[i] = (Math.random()-0.5)*300;
}
starGeo.setAttribute("position", new THREE.BufferAttribute(pos,3));
const stars = new THREE.Points(
  starGeo,
  new THREE.PointsMaterial({ color:0xffffff, size:0.06 })
);
scene.add(stars);

/* OBJECT LIST */
const objects = [];

/* ATOM */
window.spawnAtom = () => {
  const nucleus = new THREE.Mesh(
    new THREE.SphereGeometry(1.2,32,32),
    new THREE.MeshStandardMaterial({ color:0xff3355, emissive:0x330000 })
  );
  nucleus.userData.type = "atom";
  nucleus.userData.electrons = [];

  for(let i=0;i<6;i++){
    const e = new THREE.Mesh(
      new THREE.SphereGeometry(0.15,16,16),
      new THREE.MeshStandardMaterial({ color:0x33ffff, emissive:0x004444 })
    );
    e.userData.angle = Math.random()*Math.PI*2;
    nucleus.userData.electrons.push(e);
    scene.add(e);
  }
  scene.add(nucleus);
  objects.push(nucleus);
};

/* MATTER */
window.spawnMatter = () => {
  const m = new THREE.Mesh(
    new THREE.IcosahedronGeometry(5,3),
    new THREE.MeshStandardMaterial({
      wireframe:true,
      color:0x5555ff,
      transparent:true,
      opacity:0.25
    })
  );
  scene.add(m);
  objects.push(m);
};

/* ANIMATION */
function animate(t){
  requestAnimationFrame(animate);

  stars.rotation.y += 0.0002;

  objects.forEach(o=>{
    o.rotation.y += 0.002;
    if(o.userData.type === "atom"){
      o.userData.electrons.forEach((e,i)=>{
        e.userData.angle += 0.02;
        e.position.set(
          Math.cos(e.userData.angle+i)*4 + o.position.x,
          Math.sin(e.userData.angle*0.7)*2 + o.position.y,
          Math.sin(e.userData.angle+i)*4 + o.position.z
        );
      });
    }
  });

  camera.position.z = 50 - Math.sin(t*0.0004)*12;
  camera.lookAt(0,0,0);

  renderer.render(scene,camera);
}
animate();

/* RESIZE */
addEventListener("resize", ()=>{
  camera.aspect = innerWidth/innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(innerWidth, innerHeight);
});
</script>
</body>
</html>
